<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Perudo ‚Äì Kal√≥zkocka</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cinzel', serif;
      background-image: url('images/background.jpg.jpg');
      background-size: cover;
      background-position: center;
      color: white;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      background-color: rgba(0, 0, 0, 0.7);
      padding: 10px;
      border-radius: 10px;
      display: inline-block;
    }
    #playerDice, #botDice, #result, #status {
      margin-top: 20px;
      font-size: 1.2rem;
      background-color: rgba(0,0,0,0.6);
      padding: 10px;
      border-radius: 8px;
      display: inline-block;
    }
    .dice {
      font-size: 2rem;
      margin: 5px;
      display: inline-block;
    }
    #controls {
      margin-top: 20px;
    }
    select, button {
      font-size: 1rem;
      padding: 10px;
      margin: 5px;
      border-radius: 5px;
      border: none;
      cursor: pointer;
    }
    button {
      background-color: #7f00ff;
      color: white;
      box-shadow: 0 0 10px #7f00ff;
    }
    button:hover {
      background-color: #a94bff;
    }
    #resetContainer {
      display: none;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<h1>Perudo ‚Äì Kal√≥zkocka</h1>

<div id="status">Mindk√©t j√°t√©kosnak 5 kock√°ja van.</div>

<div id="playerDice"></div>
<div id="botDice" style="display:none;"></div>

<div id="controls">
  <p>T√©t: <span id="currentBet">Nincs m√©g t√©t</span></p>
  <label>Darab: 
    <select id="quantity">
      <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
    </select>
  </label>
  <label>√ârt√©k: 
    <select id="face">
      <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option>
    </select>
  </label>
  <button onclick="placeBet()">T√©t emel√©se</button>
  <button onclick="callBluff()">Bl√∂ff!</button>
</div>

<div id="result"></div>

<div id="resetContainer">
  <button onclick="startGame()">√öj j√°t√©k</button>
</div>

<script>
let playerDice = [], botDice = [];
let playerCount = 5, botCount = 5;
let currentBet = null;

function rollDice(count) {
  const dice = [];
  for (let i = 0; i < count; i++) {
    dice.push(Math.floor(Math.random() * 6) + 1);
  }
  return dice;
}

function displayDice(dice, containerId) {
  const container = document.getElementById(containerId);
  container.innerHTML = dice.map(d => `<span class="dice">üé≤${d}</span>`).join('');
}

function startGame() {
  playerCount = 5;
  botCount = 5;
  currentBet = null;
  document.getElementById("resetContainer").style.display = "none";
  document.getElementById("result").textContent = "";
  nextRound();
}

function nextRound() {
  playerDice = rollDice(playerCount);
  botDice = rollDice(botCount);
  displayDice(playerDice, "playerDice");
  document.getElementById("botDice").style.display = "none";
  document.getElementById("currentBet").textContent = "Nincs m√©g t√©t";
  currentBet = null;
  updateStatus();
}

function updateStatus() {
  document.getElementById("status").textContent =
    `J√°t√©kos: ${playerCount} kocka | Bot: ${botCount} kocka`;
}

function placeBet() {
  const quantity = parseInt(document.getElementById("quantity").value);
  const face = parseInt(document.getElementById("face").value);

  if (currentBet && (quantity < currentBet.quantity || (quantity === currentBet.quantity && face <= currentBet.face))) {
    alert("Csak magasabb t√©tet lehet mondani!");
    return;
  }

  currentBet = { quantity, face };
  document.getElementById("currentBet").textContent = `${quantity} darab ${face}-es`;

  // Bot d√∂nt√©se
  setTimeout(botResponse, 1000);
}

function botResponse() {
  const totalDice = playerDice.concat(botDice);
  const actualCount = totalDice.filter(d => d === currentBet.face).length;

  const bluffChance = Math.random();
  const willCall = (actualCount < currentBet.quantity && bluffChance < 0.5);

  if (willCall) {
    document.getElementById("result").textContent = "A bot bl√∂ff√∂t ki√°lt!";
    revealDice();
    setTimeout(() => resolveBluff(actualCount), 2000);
  } else {
    // Bot emel (egyszer≈± szab√°lyokkal)
    const newQuantity = currentBet.quantity + 1;
    const newFace = currentBet.face;
    currentBet = { quantity: newQuantity, face: newFace };
    document.getElementById("currentBet").textContent = `${newQuantity} darab ${newFace}-es`;
  }
}

function callBluff() {
  if (!currentBet) {
    alert("El≈ëbb a botnak kell t√©tet mondania!");
    return;
  }

  const totalDice = playerDice.concat(botDice);
  const actualCount = totalDice.filter(d => d === currentBet.face).length;

  document.getElementById("result").textContent = "Bl√∂ff ki√°ltva! Felfedj√ºk a kock√°kat...";
  revealDice();
  setTimeout(() => resolveBluff(actualCount, true), 2000);
}

function revealDice() {
  displayDice(botDice, "botDice");
  document.getElementById("botDice").style.display = "block";
}

function resolveBluff(actualCount, playerCalled = false) {
  let resultText = `Val√≥j√°ban ${actualCount} darab ${currentBet.face}-es volt. `;

  if (actualCount >= currentBet.quantity) {
    // A t√©t igaz volt ‚Üí aki bl√∂ff√∂t ki√°ltott, vesz√≠t
    if (playerCalled) {
      playerCount--;
      resultText += "A t√©t igaz volt. A j√°t√©kos vesz√≠t egy kock√°t.";
    } else {
      botCount--;
      resultText += "A t√©t igaz volt. A bot vesz√≠t egy kock√°t.";
    }
  } else {
    // T√©t nem igaz ‚Üí aki tette a t√©tet, vesz√≠t
    if (playerCalled) {
      botCount--;
      resultText += "A t√©t hamis volt. A bot vesz√≠t egy kock√°t.";
    } else {
      playerCount--;
      resultText += "A t√©t hamis volt. A j√°t√©kos vesz√≠t egy kock√°t.";
    }
  }

  updateStatus();
  document.getElementById("result").textContent = resultText;

  if (playerCount <= 0 || botCount <= 0) {
    document.getElementById("result").innerHTML += `<br><strong>${playerCount > 0 ? "J√°t√©kos" : "Bot"} gy≈ëz√∂tt!</strong>`;
    document.getElementById("resetContainer").style.display = "block";
  } else {
    setTimeout(nextRound, 3000);
  }
}

startGame();
</script>

</body>
</html>
