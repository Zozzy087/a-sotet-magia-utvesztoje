<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Bás - A Hazugságok Isteni Játéka</title>
  <link href="https://fonts.googleapis.com/css2?family=Eczar:wght@400..800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    body {
      font-family: "Eczar", serif;
      background-image: url('images/background.jpg.jpg');
      background-size: cover;
      background-position: center;
      color: #d1c3af;
      margin: 0;
      padding: 20px;
      text-align: center;
      background-color: #0c0c0c;
    }
    h1 {
      font-size: 2.6rem;
      margin-bottom: 10px;
      background-color: rgba(0, 0, 0, 0.7);
      padding: 15px;
      border-radius: 5px;
      display: inline-block;
      text-shadow: 0 0 10px #ff6400;
      letter-spacing: 2px;
    }
    #gameArea {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 30px;
      margin: 20px 0;
    }
    .player-section {
      background-color: rgba(20, 14, 10, 0.85);
      padding: 20px;
      border-radius: 5px;
      min-width: 260px;
      border: 1px solid #482c17;
      transition: all 0.3s ease;
      position: relative;
    }
    .active-player {
      border: 3px solid #ff6400;
      box-shadow: 0 0 25px rgba(255, 100, 0, 0.7);
      transform: scale(1.05);
      z-index: 2;
    }
    .active-player::before {
      content: "》";
      position: absolute;
      left: -30px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2.5rem;
      color: #ff6400;
      text-shadow: 0 0 10px #ff6400;
      animation: pulse 1.5s infinite;
    }
    .active-player::after {
      content: "《";
      position: absolute;
      right: -30px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2.5rem;
      color: #ff6400;
      text-shadow: 0 0 10px #ff6400;
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0% { opacity: 0.7; }
      50% { opacity: 1; }
      100% { opacity: 0.7; }
    }
    h2 {
      margin-top: 0;
      font-size: 1.8rem;
      color: #d1c3af;
    }
    .sparks-container {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 15px 0;
    }
    .divine-spark {
      width: 30px;
      height: 30px;
      background-color: #ff6400;
      border-radius: 50%;
      box-shadow: 0 0 10px #ff6400;
      transition: all 0.3s;
      opacity: 1;
    }
    .divine-spark.lost {
      opacity: 0.2;
      background-color: #482c17;
      box-shadow: none;
    }
    .dice-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 30px 0;
    }
    .dice {
      position: relative;
      width: 80px;
      height: 80px;
      margin: 10px;
      background-color: #291d14;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(255, 100, 0, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #d1c3af;
      font-size: 2.5rem;
      transition: transform 0.3s ease-out;
    }
    .dice-roll {
      animation: rollDice 0.8s ease-out;
    }
    @keyframes rollDice {
      0% { transform: rotateY(0deg) rotateX(0deg); }
      50% { transform: rotateY(720deg) rotateX(360deg); }
      100% { transform: rotateY(1440deg) rotateX(720deg); }
    }
    .hidden-value {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      width: 100%;
      font-size: 3rem;
    }
    .claimed-value {
      background-color: rgba(20, 14, 10, 0.85);
      padding: 15px;
      border-radius: 5px;
      margin: 15px auto;
      max-width: 400px;
      font-size: 1.3rem;
    }
    .previous-claim {
      font-size: 1rem;
      opacity: 0.8;
      margin-bottom: 8px;
    }
    #controls {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }
    .button-group {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
    }
    button {
      font-family: "Eczar", serif;
      font-size: 1.2rem;
      padding: 12px 25px;
      margin: 5px;
      border-radius: 5px;
      border: none;
      cursor: pointer;
      background-color: #482c17;
      color: #d1c3af;
      box-shadow: 0 0 10px rgba(255, 100, 0, 0.3);
      transition: all 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #5a381f;
      transform: scale(1.05);
      box-shadow: 0 0 15px rgba(255, 100, 0, 0.5);
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    #result {
      font-size: 1.3rem;
      background-color: rgba(20, 14, 10, 0.7);
      padding: 15px;
      border-radius: 5px;
      display: inline-block;
      margin-top: 20px;
      max-width: 80%;
      letter-spacing: 1px;
      line-height: 1.4;
    }
    #resetContainer {
      display: none;
      margin-top: 30px;
    }
    .winner {
      color: #ff6400;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(255, 100, 0, 0.7);
    }
    .rules-section {
      background-color: rgba(20, 14, 10, 0.7);
      padding: 15px;
      border-radius: 5px;
      max-width: 800px;
      margin: 20px auto;
      text-align: left;
      font-size: 1rem;
    }
    .rules-section h3 {
      color: #ff6400;
      text-align: center;
    }
    .rules-section ul {
      padding-left: 20px;
    }
    .claim-input {
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: center;
      margin-bottom: 15px;
    }
    .claim-input select {
      background-color: #291d14;
      color: #d1c3af;
      border: 1px solid #482c17;
      padding: 8px;
      border-radius: 5px;
      font-family: "Eczar", serif;
      font-size: 1.1rem;
    }
    .special-value {
      font-weight: bold;
      color: #ff6400;
    }
  </style>
</head>
<body>

<h1>Bás - A Hazugságok Isteni Játéka</h1>

<div class="rules-section">
  <h3>Játékszabályok</h3>
  <p>Mindkét játékos 3 isteni szikrával kezd. A játékban két kockával dobsz, de csak te látod az értéket. A kockákon lévő értékekből a nagyobb szám a tízesek helyére kerül (pl. 4 és 5 = 54). A dobás értékét be kell jelentened ellenfeled felé, de hazudhatsz is!</p>
  <p><strong>Értékek (növekvő sorrendben):</strong><br>
  31, 32, 41, 42, 43, 51, 52, 53, 54, 61, 62, 63, 64, 65,<br>
  <span class="special-value">1-es Fortély</span> (két 1-es), <span class="special-value">2-es Fortély</span>, <span class="special-value">3-as Fortély</span>, <span class="special-value">4-es Fortély</span>, <span class="special-value">5-ös Fortély</span>, <span class="special-value">6-os Fortély</span>,<br>
  <span class="special-value">Csínytevés</span> (21 = 1-es és 2-es)</p>
  <p>Az ellenfél vagy elhiszi a bejelentésedet, vagy kétségbe vonja azt. Ha kétségbe vonja és hazudtál, te veszítesz egy szikrát. Ha igazat mondtál, ő veszít.</p>
  <p>Ha elhiszi, akkor neki kell dobnia, és <strong>csak nagyobb vagy egyenlő értéket jelenthet be</strong> a te bejelentésedhez képest!</p>
</div>

<div id="gameArea">
  <div id="playerSection" class="player-section active-player">
    <h2>Loki (Te)</h2>
    <div class="sparks-container" id="playerSparks">
      <div class="divine-spark"></div>
      <div class="divine-spark"></div>
      <div class="divine-spark"></div>
    </div>
  </div>
  
  <div id="botSection" class="player-section">
    <h2>Odin (Bot)</h2>
    <div class="sparks-container" id="botSparks">
      <div class="divine-spark"></div>
      <div class="divine-spark"></div>
      <div class="divine-spark"></div>
    </div>
  </div>
</div>

<div class="dice-container" id="diceContainer">
  <div class="dice">
    <div class="hidden-value">?</div>
  </div>
  <div class="dice">
    <div class="hidden-value">?</div>
  </div>
</div>

<div class="claimed-value">
  <div class="previous-claim" id="previousClaim">Még nincs korábbi bejelentés</div>
  <div id="currentClaim">Kezdheted a játékot, dobj és jelentsd be az értéket!</div>
</div>

<div id="controls">
  <div class="button-group" id="rollControls">
    <button id="rollBtn" onclick="rollDice()">Dobj a kockákkal!</button>
  </div>
  
  <div class="claim-input" id="claimInputs" style="display:none;">
    <select id="claimSelect"></select>
    <button id="claimBtn" onclick="makePlayerClaim()">Bejelentem ezt az értéket</button>
  </div>
  
  <div class="button-group" id="believeControls" style="display:none;">
    <button id="believeBtn" onclick="playerBelieves()">Elhiszem</button>
    <button id="doubtBtn" onclick="playerDoubts()">Nem hiszem el</button>
  </div>
</div>

<div id="result">Válaszd a kockákkal való dobást a játék kezdéséhez!</div>

<div id="resetContainer">
  <button onclick="startGame()">Új Játék</button>
</div>

<script>
// Játék konstansok
const VALUES = [
  { name: "31", value: 0 },
  { name: "32", value: 1 },
  { name: "41", value: 2 },
  { name: "42", value: 3 },
  { name: "43", value: 4 },
  { name: "51", value: 5 },
  { name: "52", value: 6 },
  { name: "53", value: 7 },
  { name: "54", value: 8 },
  { name: "61", value: 9 },
  { name: "62", value: 10 },
  { name: "63", value: 11 },
  { name: "64", value: 12 },
  { name: "65", value: 13 },
  { name: "1-es Fortély", value: 14 },
  { name: "2-es Fortély", value: 15 },
  { name: "3-as Fortély", value: 16 },
  { name: "4-es Fortély", value: 17 },
  { name: "5-ös Fortély", value: 18 },
  { name: "6-os Fortély", value: 19 },
  { name: "Csínytevés", value: 20 }
];

// Játék változók
let gameActive = true;
let playerSparks = 3;
let botSparks = 3;
let activePlayer = 0; // 0 = játékos, 1 = bot
let currentDice = [0, 0];
let lastClaimedValue = null;
let playerHistory = [];
let botHistory = [];

// DOM elemek
const diceContainer = document.getElementById('diceContainer');
const playerSection = document.getElementById('playerSection');
const botSection = document.getElementById('botSection');
const resultEl = document.getElementById('result');
const claimInputs = document.getElementById('claimInputs');
const believeControls = document.getElementById('believeControls');
const rollControls = document.getElementById('rollControls');
const claimSelect = document.getElementById('claimSelect');
const currentClaimEl = document.getElementById('currentClaim');
const previousClaimEl = document.getElementById('previousClaim');

// Értékválasztó lista feltöltése
function populateClaimSelect(minValue = 0) {
  claimSelect.innerHTML = '';
  
  for (let i = minValue; i < VALUES.length; i++) {
    const option = document.createElement('option');
    option.value = i;
    option.textContent = VALUES[i].name;
    claimSelect.appendChild(option);
  }
}

// Játék indítása
function startGame() {
  gameActive = true;
  playerSparks = 3;
  botSparks = 3;
  activePlayer = 0; // Játékos kezd
  currentDice = [0, 0];
  lastClaimedValue = null;
  playerHistory = [];
  botHistory = [];
  
  // UI visszaállítása
  updateSparksDisplay();
  
  // Kockák visszaállítása
  resetDice();
  
  // Bejelentés visszaállítása
  previousClaimEl.textContent = "Még nincs korábbi bejelentés";
  currentClaimEl.textContent = "Kezdheted a játékot, dobj és jelentsd be az értéket!";
  
  // Gombok beállítása
  rollControls.style.display = 'block';
  claimInputs.style.display = 'none';
  believeControls.style.display = 'none';
  document.getElementById('resetContainer').style.display = 'none';
  
  // Játékos kijelölése
  playerSection.classList.add('active-player');
  botSection.classList.remove('active-player');
  
  // Üzenet megjelenítése
  displayMessage("Kezdheted a játékot! Dobj a kockákkal.");
  
  // Értékválasztó feltöltése
  populateClaimSelect();
}

// Kockák visszaállítása
function resetDice() {
  const diceElements = diceContainer.querySelectorAll('.dice');
  
  diceElements.forEach(dice => {
    dice.innerHTML = '<div class="hidden-value">?</div>';
    dice.classList.remove('dice-roll');
  });
}

// Életpontok frissítése
function updateSparksDisplay() {
  const playerSparksEl = document.getElementById('playerSparks');
  const botSparksEl = document.getElementById('botSparks');
  
  const playerSparkDivs = playerSparksEl.querySelectorAll('.divine-spark');
  const botSparkDivs = botSparksEl.querySelectorAll('.divine-spark');
  
  for (let i = 0; i < 3; i++) {
    if (i < playerSparks) {
      playerSparkDivs[i].classList.remove('lost');
    } else {
      playerSparkDivs[i].classList.add('lost');
    }
    
    if (i < botSparks) {
      botSparkDivs[i].classList.remove('lost');
    } else {
      botSparkDivs[i].classList.add('lost');
    }
  }
}

// Játékos kockát dob
function rollDice() {
  if (!gameActive || activePlayer !== 0) return;
  
  // Kockadobás animáció
  const diceElements = diceContainer.querySelectorAll('.dice');
  
  diceElements.forEach(dice => {
    dice.classList.remove('dice-roll');
    void dice.offsetWidth; // Trükk az animáció újraindításához
    dice.classList.add('dice-roll');
  });
  
  // Valódi dobás
  const die1 = Math.floor(Math.random() * 6) + 1;
  const die2 = Math.floor(Math.random() * 6) + 1;
  currentDice = [die1, die2];
  
  // Kockákat mutatjuk a játékosnak
  setTimeout(() => {
    diceElements[0].innerHTML = `<div class="hidden-value">${die1}</div>`;
    diceElements[1].innerHTML = `<div class="hidden-value">${die2}</div>`;
    
    // Értékválasztó megjelenítése
    rollControls.style.display = 'none';
    claimInputs.style.display = 'flex';
    
    // Értékek kiszámolása
    const actualValue = calculateDiceValue(die1, die2);
    const actualValueIndex = getDiceValueIndex(actualValue);
    
    // Üzenet frissítése
    displayMessage(`Dobtál: ${VALUES[actualValueIndex].name}. Jelentsd be ezt, vagy blöffölj!`);
    
    // Előző érték kezelése
    if (lastClaimedValue !== null) {
      populateClaimSelect(lastClaimedValue);
    } else {
      populateClaimSelect();
    }
  }, 800);
}

// Kockák értékének kiszámolása
function calculateDiceValue(die1, die2) {
  // Fortély ellenőrzése (két azonos szám)
  if (die1 === die2) {
    return { type: "fortely", value: die1 };
  }
  
  // Csínytevés ellenőrzése (1-es és 2-es)
  if ((die1 === 1 && die2 === 2) || (die1 === 2 && die2 === 1)) {
    return { type: "csiny", value: 0 };
  }
  
  // Normál érték: nagyobb szám elöl
  const tens = Math.max(die1, die2);
  const ones = Math.min(die1, die2);
  return { type: "normal", tens: tens, ones: ones };
}

// Megkapjuk a dobás index értékét a VALUES tömbben
function getDiceValueIndex(diceValue) {
  if (diceValue.type === "csiny") {
    return 20; // Csínytevés a legmagasabb érték
  }
  
  if (diceValue.type === "fortely") {
    return 13 + diceValue.value; // 1-es Fortély = 14, 2-es Fortély = 15, stb.
  }
  
  // Normál értéknél megkeressük a megfelelő értéket
  const valueStr = `${diceValue.tens}${diceValue.ones}`;
  const index = VALUES.findIndex(v => v.name === valueStr);
  return index;
}

// Játékos bejelenti az értéket
function makePlayerClaim() {
  const claimedValueIndex = parseInt(claimSelect.value);
  const claimedValue = VALUES[claimedValueIndex];
  
  // Játékos történet frissítése
  const actualValue = calculateDiceValue(currentDice[0], currentDice[1]);
  const actualValueIndex = getDiceValueIndex(actualValue);
  
  playerHistory.push({
    actualValue: actualValueIndex,
    claimedValue: claimedValueIndex,
    isLying: actualValueIndex !== claimedValueIndex
  });
  
  // Bejelentés frissítése
  if (lastClaimedValue !== null) {
    previousClaimEl.textContent = `Előző bejelentés: ${VALUES[lastClaimedValue].name}`;
  }
  currentClaimEl.textContent = `Loki bejelentése: ${claimedValue.name}`;
  
  // Játékos bejelentette, bot következik
  lastClaimedValue = claimedValueIndex;
  
  // UI frissítése
  claimInputs.style.display = 'none';
  
  // Játékos váltás
  setTimeout(() => {
    resetDice();
    switchPlayer();
    botTurn();
  }, 1000);
}

// Bot köre
function botTurn() {
  if (!gameActive || activePlayer !== 1) return;
  
  displayMessage("Odin mérlegeli a bejelentésedet...");
  
  setTimeout(() => {
    // Bot eldönti, elhiszi-e
    const believeDecision = botDecidesBelieve();
    
    if (believeDecision) {
      // Bot elhiszi, dobnia kell
      displayMessage("Odin elhiszi a bejelentésedet és most ő dob.");
      
      setTimeout(() => {
        botRollAndClaim();
      }, 1500);
    } else {
      // Bot nem hiszi el
      displayMessage("Odin nem hiszi el a bejelentésedet!");
      
      setTimeout(() => {
        revealPlayerDice();
      }, 1500);
    }
  }, 2000);
}

// Bot dönt, elhiszi-e a játékos bejelentését
function botDecidesBelieve() {
  // Az érték, amit a játékos bejelentett
  const claimedValue = lastClaimedValue;
  
  // Magasabb értékek esetén nagyobb az esély, hogy igazat mond a játékos
  const highValueThreshold = 14; // Fortély és fölötte
  
  // Bot intelligens döntési logikája
  
  // 1. Ha a játékos tényleg magas értéket jelentett be (pl. Fortély vagy Csínytevés)
  if (claimedValue >= highValueThreshold) {
    // Alacsonyabb valószínűséggel vonja kétségbe a magas értékeket
    // De nézünk eddigi mintákat is
    const lyingHabit = analyzeLyingHabit();
    
    // Ha a játékos gyakran hazudik magas értékeknél
    if (lyingHabit.highValueLieRate > 0.6) {
      return Math.random() > 0.7; // 30% esély, hogy elhiszi
    }
    
    return Math.random() > 0.4; // 60% esély, hogy elhiszi
  }
  
  // 2. Ha a bejelentett érték csak kicsivel nagyobb az előzőnél, nagyobb eséllyel hazudik
  if (playerHistory.length > 1) {
    const previousClaim = playerHistory[playerHistory.length - 2].claimedValue;
    
    if (claimedValue - previousClaim <= 2 && claimedValue > 10) {
      return Math.random() > 0.6; // 40% esély, hogy elhiszi
    }
  }
  
  // 3. Statisztikák alapján
  const stats = analyzeLyingHabit();
  const randomFactor = Math.random() * 0.2; // Véletlenszerűség hozzáadása
  
  // Általános hazugságarány alapján dönt
  return Math.random() > (stats.overallLieRate + randomFactor);
}

// Játékos hazudási szokásainak elemzése
function analyzeLyingHabit() {
  if (playerHistory.length < 2) {
    return { overallLieRate: 0.5, highValueLieRate: 0.5 };
  }
  
  // Összes hazugság számolása
  const totalLies = playerHistory.filter(h => h.isLying).length;
  const overallLieRate = totalLies / playerHistory.length;
  
  // Magas értékeknél történő hazugság
  const highValueClaims = playerHistory.filter(h => h.claimedValue >= 14);
  const highValueLies = highValueClaims.filter(h => h.isLying).length;
  const highValueLieRate = highValueClaims.length > 0 ? highValueLies / highValueClaims.length : 0.5;
  
  return { overallLieRate, highValueLieRate };
}

// Bot dob és bejelent
function botRollAndClaim() {
  // Bot dob
  const die1 = Math.floor(Math.random() * 6) + 1;
  const die2 = Math.floor(Math.random() * 6) + 1;
  currentDice = [die1, die2];
  
  // Kockákkal való dobás animálása
  const diceElements = diceContainer.querySelectorAll('.dice');
  
  diceElements.forEach(dice => {
    dice.classList.remove('dice-roll');
    void dice.offsetWidth;
    dice.classList.add('dice-roll');
  });
  
  // Kockák elrejtése a játékos elől (csak bot láthatja)
  diceElements.forEach(dice => {
    dice.innerHTML = '<div class="hidden-value">?</div>';
  });
  
  setTimeout(() => {
    // Bot értékének kiszámolása
    const actualValue = calculateDiceValue(die1, die2);
    const actualValueIndex = getDiceValueIndex(actualValue);
    
    // Bot dönt, hazudjon-e
    const botClaimedValue = botDecidesClaim(actualValueIndex);
    
    // Bot történetének frissítése
    botHistory.push({
      actualValue: actualValueIndex,
      claimedValue: botClaimedValue,
      isLying: actualValueIndex !== botClaimedValue
    });
    
    // Bejelentés frissítése
    previousClaimEl.textContent = `Előző bejelentés: ${VALUES[lastClaimedValue].name}`;
    currentClaimEl.textContent = `Odin bejelentése: ${VALUES[botClaimedValue].name}`;
    
    lastClaimedValue = botClaimedValue;
    
    // Játékos lehetőségeinek megjelenítése
    believeControls.style.display = 'flex';
    
    displayMessage("Odin bejelentette értékét. Elhiszed, vagy kétségbe vonod?");
  }, 1000);
}

// Bot eldönti, milyen értéket jelentsen be
function botDecidesClaim(actualValueIndex) {
  // Minimális érték (az előző bejelentésnél nagyobb vagy egyenlő)
  const minValue = lastClaimedValue;
  
  // Ha a valós dobás magasabb, mint a minimum, akkor mondhat igazat
  if (actualValueIndex >= minValue) {
    // 70% eséllyel igazat mond
    if (Math.random() < 0.7) {
      return actualValueIndex;
    }
  }
  
  // Hazudnia kell vagy úgy dönt, hogy hazudik
  
  // Bot stratégia hazudáshoz
  const gameState = analyzeGameState();
  
  // 1. Ha a bot vesztésre áll, nagyobbat blöfföl
  if (gameState === "losing") {
    // Vakmerőbb blöff
    const highValues = [15, 16, 17, 18, 19, 20]; // Fortélyok és Csínytevés
    const randomHighValue = highValues[Math.floor(Math.random() * highValues.length)];
    
    // De csak 40% eséllyel hazudik nagyon nagyot
    if (Math.random() < 0.4) {
      return Math.max(minValue, randomHighValue);
    }
  }
  
  // 2. Alacsonyabb értéknél kicsit nagyobbat mond, hogy hihetőbb legyen
  if (minValue < 10) {
    // Csak 1-3 értékkel nagyobbat mond
    const increment = Math.floor(Math.random() * 3) + 1;
    return Math.min(minValue + increment, 13); // Ne menjen Fortély fölé
  }
  
  // 3. Magasabb értékeknél óvatosabban hazudik
  if (minValue >= 13) {
    // 30% esély, hogy nagy blöfföt tesz
    if (Math.random() < 0.3) {
      return Math.min(20, minValue + Math.floor(Math.random() * 3) + 1);
    }
    
    // 70% esély, hogy csak eggyel nagyobbat mond
    return minValue + 1;
  }
  
  // Alapértelmezett: minimális értéknél csak kicsit nagyobbat mond
  return minValue + Math.floor(Math.random() * 2) + 1;
}

// Játékállás elemzése
function analyzeGameState() {
  if (playerSparks > botSparks + 1) {
    return "losing"; // Bot vesztésre áll
  }
  
  if (botSparks > playerSparks + 1) {
    return "winning"; // Bot nyerésre áll
  }
  
  return "even"; // Kiegyenlített
}

// Játékos elhiszi a bot bejelentését
function playerBelieves() {
  // Játékos elhiszi, mostantól ő következik
  displayMessage("Elhiszed Odin bejelentését. Most te dobsz.");
  
  // Játékos aktív lesz
  setTimeout(() => {
    switchPlayer();
    // Dobás gomb megjelenítése
    believeControls.style.display = 'none';
    rollControls.style.display = 'block';
  }, 1000);
}

// Játékos kétségbe vonja a bot bejelentését
function playerDoubts() {
  displayMessage("Nem hiszed el Odin bejelentését! Lássuk, igazat mondott-e...");
  
  // Bot felfedi a kockáit
  setTimeout(() => {
    revealBotDice();
  }, 1000);
}

// Játékos kockáinak felfedése (amikor a bot nem hiszi el)
function revealPlayerDice() {
  // Utolsó játékos-bejelentés
  const lastPlayerClaim = playerHistory[playerHistory.length - 1];
  
  // Valós dobás megjelenítése
  const diceElements = diceContainer.querySelectorAll('.dice');
  diceElements[0].innerHTML = `<div class="hidden-value">${currentDice[0]}</div>`;
  diceElements[1].innerHTML = `<div class="hidden-value">${currentDice[1]}</div>`;
  
  // Ellenőrzés, hazudott-e a játékos
  setTimeout(() => {
    if (lastPlayerClaim.isLying) {
      // Játékos hazudott, szikrát veszít
      playerSparks--;
      updateSparksDisplay();
      
      displayMessage("Hazudtál! Elvesztettél egy isteni szikrát.");
      
      // Új kör, bot kezd
      setTimeout(() => {
        lastClaimedValue = null; // Új kör, bármi mondható
        previousClaimEl.textContent = "Új kör kezdődik";
        currentClaimEl.textContent = "Odin kezd";
        
        if (checkGameEnd()) return;
        
        resetDice();
        activePlayer = 1; // Bot kezd
        switchPlayer();
        botTurn();
      }, 2000);
    } else {
      // Játékos igazat mondott, bot veszít szikrát
      botSparks--;
      updateSparksDisplay();
      
      displayMessage("Igazat mondtál! Odin elvesztett egy isteni szikrát.");
      
      // Új kör, játékos kezd
      setTimeout(() => {
        lastClaimedValue = null; // Új kör, bármi mondható
        previousClaimEl.textContent = "Új kör kezdődik";
        currentClaimEl.textContent = "Te kezdesz";
        
        if (checkGameEnd()) return;
        
        resetDice();
        activePlayer = 0; // Játékos kezd
        switchPlayer();
        
        // Dobás gomb megjelenítése
        believeControls.style.display = 'none';
        rollControls.style.display = 'block';
      }, 2000);
    }
  }, 1500);
}

// Bot kockáinak felfedése (amikor a játékos nem hiszi el)
function revealBotDice() {
  // Utolsó bot-bejelentés
  const lastBotClaim = botHistory[botHistory.length - 1];
  
  // Valós dobás megjelenítése
  const diceElements = diceContainer.querySelectorAll('.dice');
  diceElements[0].innerHTML = `<div class="hidden-value">${currentDice[0]}</div>`;
  diceElements[1].innerHTML = `<div class="hidden-value">${currentDice[1]}</div>`;
  
  // Ellenőrzés, hazudott-e a bot
  setTimeout(() => {
    if (lastBotClaim.isLying) {
      // Bot hazudott, szikrát veszít
      botSparks--;
      updateSparksDisplay();
      
      displayMessage("Leleplezted Odin hazugságát! Odin elvesztett egy isteni szikrát.");
      
      // Új kör, játékos kezd
      setTimeout(() => {
        lastClaimedValue = null; // Új kör, bármi mondható
        previousClaimEl.textContent = "Új kör kezdődik";
        currentClaimEl.textContent = "Te kezdesz";
        
        if (checkGameEnd()) return;
        
        resetDice();
        activePlayer = 0; // Játékos kezd
        switchPlayer();
        
        // Dobás gomb megjelenítése
        believeControls.style.display = 'none';
        rollControls.style.display = 'block';
      }, 2000);
    } else {
      // Bot igazat mondott, játékos veszít szikrát
      playerSparks--;
      updateSparksDisplay();
      
      displayMessage("Odin igazat mondott! Elvesztettél egy isteni szikrát.");
      
      // Új kör, bot kezd
      setTimeout(() => {
        lastClaimedValue = null; // Új kör, bármi mondható
        previousClaimEl.textContent = "Új kör kezdődik";
        currentClaimEl.textContent = "Odin kezd";
        
        if (checkGameEnd()) return;
        
        resetDice();
        activePlayer = 1; // Bot kezd
        switchPlayer();
        botTurn();
      }, 2000);
    }
  }, 1500);
}

// Játék vége ellenőrzése
function checkGameEnd() {
  if (playerSparks <= 0) {
    // Bot nyert
    gameActive = false;
    displayMessage('<span class="winner">Vesztettél! Odin minden isteni szikrádat elvette.</span>');
    document.getElementById('resetContainer').style.display = 'block';
    return true;
  }
  
  if (botSparks <= 0) {
    // Játékos nyert
    gameActive = false;
    displayMessage('<span class="winner">Győztél! Loki fortélyai legyőzték Odint.</span>');
    document.getElementById('resetContainer').style.display = 'block';
    return true;
  }
  
  return false;
}

// Játékos váltás
function switchPlayer() {
  // Aktív játékos vizuális jelölése
  playerSection.classList.toggle('active-player');
  botSection.classList.toggle('active-player');
}

// Üzenet megjelenítése
function displayMessage(message) {
  resultEl.innerHTML = message;
}

// Játék indítása
startGame();
</script>

</body>
</html>
