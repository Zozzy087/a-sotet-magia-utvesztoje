<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Loki Blöff - Rúnakocka Játék</title>
  <link href="https://fonts.googleapis.com/css2?family=Eczar:wght@400..800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Germania+One&display=swap" rel="stylesheet">
  <style>
    :root {
      --main-bg-color: #0c0c0c;
      --panel-bg-color: rgba(20, 14, 10, 0.85);
      --border-color: #482c17;
      --highlight-color: #ff6400;
      --text-color: #d1c3af;
      --secondary-bg: rgba(72, 44, 23, 0.6);
      --dice-bg: #291d14;
    }
    
    body {
      font-family: "Eczar", serif;
      background-image: url('images/background.jpg.jpg');
      background-size: cover;
      background-position: center;
      color: var(--text-color);
      margin: 0;
      padding: 20px;
      text-align: center;
      background-color: var(--main-bg-color);
    }
    
    h1 {
      font-size: 2.6rem;
      margin-bottom: 10px;
      background-color: rgba(0, 0, 0, 0.7);
      padding: 15px;
      border-radius: 5px;
      display: inline-block;
      text-shadow: 0 0 10px var(--highlight-color);
      letter-spacing: 2px;
      font-family: 'Germania One', cursive;
    }
    
    #gameArea {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 30px;
      margin: 20px 0;
    }
    
    .player-section {
      background-color: var(--panel-bg-color);
      padding: 20px;
      border-radius: 5px;
      min-width: 300px;
      border: 1px solid var(--border-color);
      transition: all 0.3s ease;
      position: relative;
    }
    
    .active-player {
      border: 3px solid var(--highlight-color);
      box-shadow: 0 0 25px rgba(255, 100, 0, 0.7);
      transform: scale(1.05);
      z-index: 2;
    }
    
    .active-player::before {
      content: "》";
      position: absolute;
      left: -30px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2.5rem;
      color: var(--highlight-color);
      text-shadow: 0 0 10px var(--highlight-color);
      animation: pulse 1.5s infinite;
    }
    
    .active-player::after {
      content: "《";
      position: absolute;
      right: -30px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2.5rem;
      color: var(--highlight-color);
      text-shadow: 0 0 10px var(--highlight-color);
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0% { opacity: 0.7; }
      50% { opacity: 1; }
      100% { opacity: 0.7; }
    }
    
    h2 {
      margin-top: 0;
      font-size: 1.8rem;
      color: var(--text-color);
      font-family: 'Germania One', cursive;
    }
    
    .health {
      font-size: 2rem;
      margin: 15px 0;
      color: var(--highlight-color);
    }
    
    .health-bar {
      background-color: rgba(0,0,0,0.5);
      height: 20px;
      width: 100%;
      border-radius: 10px;
      margin: 10px 0;
      overflow: hidden;
    }
    
    .health-fill {
      background-color: var(--highlight-color);
      height: 100%;
      border-radius: 10px;
      transition: width 0.5s;
    }
    
    .dice-container {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    
    .dice {
      width: 60px;
      height: 60px;
      background-color: var(--dice-bg);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
      font-size: 2rem;
      position: relative;
      transition: transform 0.3s;
    }
    
    .dice.highlight {
      border: 2px solid var(--highlight-color);
      box-shadow: 0 0 15px var(--highlight-color);
      transform: scale(1.1);
    }
    
    .dice.hidden {
      background-color: #392418;
    }
    
    .dice.hidden::after {
      content: "?";
      position: absolute;
      font-size: 2rem;
      color: rgba(255,255,255,0.3);
    }
    
    .rune {
      font-family: 'Germania One', cursive;
      font-size: 2.5rem;
      line-height: 1;
    }
    
    .claim-container {
      background-color: var(--secondary-bg);
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
    }
    
    .controls {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin: 20px 0;
    }
    
    .action-row {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    button {
      font-family: 'Germania One', cursive;
      font-size: 1.2rem;
      padding: 12px 25px;
      border-radius: 5px;
      border: none;
      cursor: pointer;
      background-color: var(--border-color);
      color: var(--text-color);
      box-shadow: 0 0 10px rgba(255, 100, 0, 0.3);
      transition: all 0.3s;
      letter-spacing: 1px;
      min-width: 120px;
    }
    
    button:hover:not(:disabled) {
      background-color: #5a381f;
      transform: scale(1.05);
      box-shadow: 0 0 15px rgba(255, 100, 0, 0.5);
    }
    
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .rune-selector {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .rune-btn {
      width: 50px;
      height: 50px;
      font-size: 1.8rem;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      min-width: 0;
    }
    
    .count-selector {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .count-btn {
      width: 40px;
      min-width: 40px;
      height: 40px;
      font-size: 1.4rem;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }
    
    #message {
      font-size: 1.3rem;
      background-color: var(--panel-bg-color);
      padding: 15px;
      border-radius: 5px;
      display: inline-block;
      margin: 20px 0;
      max-width: 80%;
      letter-spacing: 1px;
      line-height: 1.4;
    }
    
    .result-highlight {
      color: var(--highlight-color);
      font-weight: bold;
      text-shadow: 0 0 10px rgba(255, 100, 0, 0.7);
    }
    
    .loki-text {
      font-size: 2rem;
      font-family: 'Germania One', cursive;
      color: var(--highlight-color);
      text-shadow: 0 0 15px var(--highlight-color);
      letter-spacing: 3px;
      animation: pulseLoki 2s infinite;
    }
    
    @keyframes pulseLoki {
      0% { text-shadow: 0 0 10px var(--highlight-color); }
      50% { text-shadow: 0 0 25px var(--highlight-color), 0 0 40px var(--highlight-color); }
      100% { text-shadow: 0 0 10px var(--highlight-color); }
    }
    
    .rune-guide {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
      margin: 20px auto;
      background-color: var(--panel-bg-color);
      padding: 10px;
      border-radius: 5px;
      max-width: 600px;
    }
    
    .rune-item {
      display: flex;
      align-items: center;
      margin: 5px 10px;
    }
    
    .rune-symbol {
      font-size: 2rem;
      font-family: 'Germania One', cursive;
      margin-right: 10px;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: var(--dice-bg);
      border-radius: 5px;
      box-shadow: 0 0 8px rgba(255, 100, 0, 0.2);
    }
    
    .rune-name {
      font-size: 1rem;
      text-align: left;
    }
    
    #resetContainer {
      display: none;
      margin-top: 30px;
    }
  </style>
</head>
<body>

<h1>Loki Blöff - Rúnakocka Játék</h1>

<div class="rune-guide">
  <div class="rune-item">
    <div class="rune-symbol">ᛚ</div>
    <div class="rune-name">Laguz - Víz</div>
  </div>
  <div class="rune-item">
    <div class="rune-symbol">ᛜ</div>
    <div class="rune-name">Ingwaz - Termékenység</div>
  </div>
  <div class="rune-item">
    <div class="rune-symbol">ᛟ</div>
    <div class="rune-name">Othala - Örökség</div>
  </div>
  <div class="rune-item">
    <div class="rune-symbol">ᚲ</div>
    <div class="rune-name">Kenaz - Fáklya</div>
  </div>
  <div class="rune-item">
    <div class="rune-symbol">L O K I</div>
    <div class="rune-name">Mind a 4 rúna = Azonnali győzelem!</div>
  </div>
</div>

<div id="gameArea">
  <div id="playerSection" class="player-section active-player">
    <h2>Kalandor</h2>
    
    <div class="health-bar">
      <div id="playerHealthFill" class="health-fill" style="width: 100%;"></div>
    </div>
    <div class="health">Életerő: <span id="playerHealth">5</span></div>
    
    <div class="dice-container" id="playerDice">
      <!-- Játékos kockái ide kerülnek -->
    </div>
    
    <div class="claim-container" id="playerClaimUI">
      <p>Válassz egy rúnát és mondj egy számot!</p>
      
      <div class="rune-selector">
        <button class="rune-btn" data-rune="ᛚ" onclick="selectRune('ᛚ')">ᛚ</button>
        <button class="rune-btn" data-rune="ᛜ" onclick="selectRune('ᛜ')">ᛜ</button>
        <button class="rune-btn" data-rune="ᛟ" onclick="selectRune('ᛟ')">ᛟ</button>
        <button class="rune-btn" data-rune="ᚲ" onclick="selectRune('ᚲ')">ᚲ</button>
      </div>
      
      <div class="count-selector">
        <button class="count-btn" onclick="selectCount(1)">1</button>
        <button class="count-btn" onclick="selectCount(2)">2</button>
        <button class="count-btn" onclick="selectCount(3)">3</button>
        <button class="count-btn" onclick="selectCount(4)">4</button>
      </div>
      
      <div class="action-row">
        <button id="claimBtn" onclick="makeClaim()" disabled>Állítás</button>
      </div>
    </div>
    
    <div class="claim-container" id="playerResponseUI" style="display: none;">
      <p>A Sötét Nagyúr állítása: <span id="botClaimText"></span></p>
      <div class="action-row">
        <button onclick="respondToClaim(true)">Igazat mond</button>
        <button onclick="respondToClaim(false)">Blöfföl</button>
      </div>
    </div>
  </div>
  
  <div id="botSection" class="player-section">
    <h2>Sötét Nagyúr</h2>
    
    <div class="health-bar">
      <div id="botHealthFill" class="health-fill" style="width: 100%;"></div>
    </div>
    <div class="health">Életerő: <span id="botHealth">5</span></div>
    
    <div class="dice-container" id="botDice">
      <!-- Bot kockái ide kerülnek -->
    </div>
    
    <div class="claim-container">
      <p id="botClaimDisplay">Várakozás az állításodra...</p>
      <div class="action-row" id="botResponseUI" style="display: none;">
        <button id="botThinkingBtn" disabled>Gondolkodik...</button>
      </div>
    </div>
  </div>
</div>

<div id="message">Dobj a rúnakockákkal a kezdéshez!</div>

<div class="controls" id="mainControls">
  <div class="action-row">
    <button id="rollBtn" onclick="playerRoll()">Kockadobás</button>
    <button id="newGameBtn" onclick="startGame()" style="display: none;">Új játék</button>
  </div>
</div>

<script>
// Játék változók
let playerHealth = 5;
let botHealth = 5;
let playerDice = [];
let botDice = [];
let gameState = 'start'; // 'start', 'playerClaim', 'botResponse', 'botClaim', 'playerResponse', 'gameOver'
let selectedRune = null;
let selectedCount = null;
let currentClaim = null;

// Rúna szimbólumok és nevek
const runes = [
  { symbol: 'ᛚ', name: 'Laguz' },   // L
  { symbol: 'ᛜ', name: 'Ingwaz' },  // I
  { symbol: 'ᛟ', name: 'Othala' },  // O
  { symbol: 'ᚲ', name: 'Kenaz' }    // K
];

// DOM elemek
const playerDiceContainer = document.getElementById('playerDice');
const botDiceContainer = document.getElementById('botDice');
const playerSection = document.getElementById('playerSection');
const botSection = document.getElementById('botSection');
const messageEl = document.getElementById('message');
const rollBtn = document.getElementById('rollBtn');
const claimBtn = document.getElementById('claimBtn');
const playerClaimUI = document.getElementById('playerClaimUI');
const playerResponseUI = document.getElementById('playerResponseUI');
const botResponseUI = document.getElementById('botResponseUI');

// Játék indítása
function startGame() {
  playerHealth = 5;
  botHealth = 5;
  playerDice = [];
  botDice = [];
  gameState = 'start';
  selectedRune = null;
  selectedCount = null;
  currentClaim = null;
  
  // UI visszaállítása
  updateHealthDisplay();
  playerDiceContainer.innerHTML = '';
  botDiceContainer.innerHTML = '';
  messageEl.textContent = 'Dobj a rúnakockákkal a kezdéshez!';
  
  // Gombok visszaállítása
  rollBtn.style.display = 'inline-block';
  rollBtn.disabled = false;
  document.getElementById('newGameBtn').style.display = 'none';
  playerClaimUI.style.display = 'block';
  playerResponseUI.style.display = 'none';
  botResponseUI.style.display = 'none';
  
  // Aktív játékos jelölése
  playerSection.classList.add('active-player');
  botSection.classList.remove('active-player');
  
  clearSelection();
}

// Játékos kockadobása
function playerRoll() {
  if (gameState !== 'start' && gameState !== 'playerTurn') return;
  
  // Kockadobás animáció és eredmény
  playerDice = rollDice();
  renderPlayerDice();
  
  // LOKI kombináció ellenőrzése
  if (checkForLoki(playerDice)) {
    showLokiVictory('player');
    return;
  }
  
  // Játékállapot frissítése
  gameState = 'playerClaim';
  messageEl.textContent = 'Mit állítasz a dobásodról?';
  rollBtn.disabled = true;
  
  // UI frissítése
  playerClaimUI.style.display = 'block';
  clearSelection();
}

// Rúna kiválasztása
function selectRune(rune) {
  if (gameState !== 'playerClaim') return;
  
  selectedRune = rune;
  updateSelectionUI();
}

// Darabszám kiválasztása
function selectCount(count) {
  if (gameState !== 'playerClaim') return;
  
  selectedCount = count;
  updateSelectionUI();
}

// Kiválasztás UI frissítése
function updateSelectionUI() {
  // Rúna gombok
  document.querySelectorAll('.rune-btn').forEach(btn => {
    btn.classList.remove('highlight');
    if (btn.dataset.rune === selectedRune) {
      btn.classList.add('highlight');
    }
  });
  
  // Darabszám gombok
  document.querySelectorAll('.count-btn').forEach((btn, index) => {
    btn.classList.remove('highlight');
    if (parseInt(btn.textContent) === selectedCount) {
      btn.classList.add('highlight');
    }
  });
  
  // Állítás gomb engedélyezése
  claimBtn.disabled = !(selectedRune && selectedCount);
}

// Kiválasztás törlése
function clearSelection() {
  selectedRune = null;
  selectedCount = null;
  updateSelectionUI();
}

// Állítás tétele
function makeClaim() {
  if (gameState !== 'playerClaim' || !selectedRune || !selectedCount) return;
  
  // Állítás rögzítése
  currentClaim = { rune: selectedRune, count: selectedCount };
  
  // UI frissítése
  messageEl.textContent = `Azt állítod, hogy ${selectedCount} db ${selectedRune} rúnát dobtál.`;
  playerClaimUI.style.display = 'none';
  botResponseUI.style.display = 'block';
  document.getElementById('botThinkingBtn').disabled = true;
  
  // Játékállapot frissítése
  gameState = 'botResponse';
  
  // Bot válasza késleltetéssel
  setTimeout(botResponse, 2000);
}

// Bot válasza a játékos állítására
function botResponse() {
  if (gameState !== 'botResponse') return;
  
  // A bot eldönti, hogy elhiszi-e az állítást
  const actualCount = countRune(playerDice, currentClaim.rune);
  const believesPlayer = botDecideToTrust(currentClaim, actualCount);
  
  // Eredmény kiértékelése
  const isPlayerHonest = actualCount >= currentClaim.count;
  
  // UI frissítése - bot állítása
  document.getElementById('botThinkingBtn').textContent = 
    believesPlayer ? "Elhiszem!" : "Blöffölsz!";
  document.getElementById('botThinkingBtn').disabled = false;
  
  // Teljes játékoskockák felfedése
  revealDice(playerDiceContainer, playerDice);
  
  setTimeout(() => {
    // Eredmény kiértékelése
    if (believesPlayer === isPlayerHonest) {
      // Bot helyesen döntött
      if (isPlayerHonest) {
        messageEl.innerHTML = `<span class="result-highlight">A Sötét Nagyúr elhitte az igazat!</span> Valóban ${actualCount} db ${currentClaim.rune} rúnát dobtál.`;
      } else {
        messageEl.innerHTML = `<span class="result-highlight">A Sötét Nagyúr leleplezte a blöffödet!</span> Csak ${actualCount} db ${currentClaim.rune} rúnát dobtál, nem ${currentClaim.count}-et.`;
        decreaseHealth('player');
      }
    } else {
      // Bot tévesen döntött
      if (isPlayerHonest) {
        messageEl.innerHTML = `<span class="result-highlight">A Sötét Nagyúr nem hitt neked, pedig igazat mondtál!</span> Valóban ${actualCount} db ${currentClaim.rune} rúnát dobtál.`;
        decreaseHealth('bot');
      } else {
        messageEl.innerHTML = `<span class="result-highlight">A Sötét Nagyúr bedőlt a blöffödnek!</span> Csak ${actualCount} db ${currentClaim.rune} rúnát dobtál, nem ${currentClaim.count}-et.`;
        decreaseHealth('bot');
      }
    }
    
    // Játék folytatása, ha még van élet
    if (playerHealth > 0 && botHealth > 0) {
      setTimeout(botTurn, 3000);
    }
  }, 2000);
}

// Bot köre
function botTurn() {
  // Aktív játékos váltása
  playerSection.classList.remove('active-player');
  botSection.classList.add('active-player');
  
  // Bot dob
  botDice = rollDice();
  renderBotDice(true); // Rejtett kockák
  
  // LOKI kombináció ellenőrzése
  if (checkForLoki(botDice)) {
    // Kis késleltetéssel felfedi a kockákat
    setTimeout(() => {
      revealDice(botDiceContainer, botDice);
      showLokiVictory('bot');
    }, 1000);
    return;
  }
  
  // Játékállapot frissítése
  gameState = 'botClaim';
  
  // Bot állítása
  setTimeout(() => {
    const botClaim = generateBotClaim(botDice);
    currentClaim = botClaim;
    
    // UI frissítése
    document.getElementById('botClaimText').textContent = `${botClaim.count} db ${botClaim.rune} rúna`;
    document.getElementById('botClaimDisplay').textContent = `Állításom: ${botClaim.count} db ${botClaim.rune} rúna`;
    
    messageEl.textContent = `A Sötét Nagyúr azt állítja, hogy ${botClaim.count} db ${botClaim.rune} rúnát dobott. Mit gondolsz?`;
    playerResponseUI.style.display = 'block';
    botResponseUI.style.display = 'none';
    
    // Játékállapot frissítése
    gameState = 'playerResponse';
    
    // Aktív játékos visszaváltása
    playerSection.classList.add('active-player');
    botSection.classList.remove('active-player');
  }, 2000);
}

// Játékos válasza a bot állítására
function respondToClaim(believesBot) {
  if (gameState !== 'playerResponse') return;
  
  // Teljes bot kockák felfedése
  revealDice(botDiceContainer, botDice);
  
  // Eredmény kiértékelése
  const actualCount = countRune(botDice, currentClaim.rune);
  const isBotHonest = actualCount >= currentClaim.count;
  
  setTimeout(() => {
    // Eredmény kiértékelése
    if (believesBot === isBotHonest) {
      // Játékos helyesen döntött
      if (isBotHonest) {
        messageEl.innerHTML = `<span class="result-highlight">Helyesen bíztál a Sötét Nagyúrban!</span> Valóban ${actualCount} db ${currentClaim.rune} rúnát dobott.`;
      } else {
        messageEl.innerHTML = `<span class="result-highlight">Helyesen lebuktattad a Sötét Nagyúr blöffjét!</span> Csak ${actualCount} db ${currentClaim.rune} rúnát dobott, nem ${currentClaim.count}-et.`;
        decreaseHealth('bot');
      }
    } else {
      // Játékos tévesen döntött
      if (isBotHonest) {
        messageEl.innerHTML = `<span class="result-highlight">Tévesen vádoltad blöfföléssel a Sötét Nagyurat!</span> Valóban ${actualCount} db ${currentClaim.rune} rúnát dobott.`;
        decreaseHealth('player');
      } else {
        messageEl.innerHTML = `<span class="result-highlight">Bedőltél a Sötét Nagyúr blöffjének!</span> Csak ${actualCount} db ${currentClaim.rune} rúnát dobott, nem ${currentClaim.count}-et.`;
        decreaseHealth('player');
      }
    }
    
    // Játék folytatása, ha még van élet
    if (playerHealth > 0 && botHealth > 0) {
      setTimeout(() => {
        // UI visszaállítása
        playerDiceContainer.innerHTML = '';
        botDiceContainer.innerHTML = '';
        messageEl.textContent = 'Új kör kezdődik. Dobj a kockákkal!';
        
        // Gombok visszaállítása
        rollBtn.disabled = false;
        playerResponseUI.style.display = 'none';
        document.getElementById('botClaimDisplay').textContent = 'Várakozás az állításodra...';
        
        // Játékállapot frissítése
        gameState = 'playerTurn';
      }, 3000);
    }
  }, 1500);
}

// Életerő csökkentése
function decreaseHealth(player) {
  if (player === 'player') {
    playerHealth--;
    document.getElementById('playerHealth').textContent = playerHealth;
    document.getElementById('playerHealthFill').style.width = `${(playerHealth / 5) * 100}%`;
  } else {
    botHealth--;
    document.getElementById('botHealth').textContent = botHealth;
    document.getElementById('botHealthFill').style.width = `${(botHealth / 5) * 100}%`;
  }
  
  // Ellenőrizzük, hogy vége van-e a játéknak
  if (playerHealth <= 0 || botHealth <= 0) {
    gameState = 'gameOver';
    setTimeout(showGameOver, 2000);
  }
}

// Életerő kijelző frissítése
function updateHealthDisplay() {
  document.getElementById('playerHealth').textContent = playerHealth;
  document.getElementById('botHealth').textContent = botHealth;
  document.getElementById('playerHealthFill').style.width = `${(playerHealth / 5) * 100}%`;
  document.getElementById('botHealthFill').style.width = `${(botHealth / 5) * 100}%`;
}

// Játék vége képernyő
function showGameOver() {
  if (playerHealth <= 0) {
    messageEl.innerHTML = `<span class="result-highlight">A Sötét Nagyúr legyőzött!</span> A világ sötétségbe borul...`;
  } else {
    messageEl.innerHTML = `<span class="result-highlight">Győztél!</span> Legyőzted a Sötét Nagyurat a blöff játékban!`;
  }
  
  // UI frissítése
  rollBtn.style.display = 'none';
  playerClaimUI.style.display = 'none';
  playerResponseUI.style.display = 'none';
  document.getElementById('newGameBtn').style.display = 'inline-block';
}

// LOKI kombináció győzelem
function showLokiVictory(winner) {
  gameState = 'gameOver';
  
  // Tényleges LOKI sorrendbe rendezett kockák
  const lokiOrder = rearrangeToLoki(winner === 'player' ? playerDice : botDice);
  
  if (winner === 'player') {
    revealDice(playerDiceContainer, lokiOrder);
    messageEl.innerHTML = `<span class="loki-text">LOKI!</span><br><span class="result-highlight">Micsoda szerencse! Megidézted Lokit!</span> Azonnal győztél!`;
  } else {
    revealDice(botDiceContainer, lokiOrder);
    messageEl.innerHTML = `<span class="loki-text">LOKI!</span><br><span class="result-highlight">A Sötét Nagyúr megidézte Lokit!</span> Azonnal vesztettél!`;
  }
  
  // UI frissítése
  rollBtn.style.display = 'none';
  playerClaimUI.style.display = 'none';
  playerResponseUI.style.display = 'none';
  document.getElementById('newGameBtn').style.display = 'inline-block';
}

// 4 db D4 kocka dobása (minden kockán ugyanaz a 4 rúna)
function rollDice() {
  const dice = [];
  for (let i = 0; i < 4; i++) {
    // 0-3 index a runes tömbben
    const runeIndex = Math.floor(Math.random() * 4);
    dice.push(runes[runeIndex].symbol);
  }
  return dice;
}

// Játékos kockáinak megjelenítése
function renderPlayerDice() {
  playerDiceContainer.innerHTML = '';
  
  playerDice.forEach(runeSymbol => {
    const diceEl = document.createElement('div');
    diceEl.className = 'dice';
    diceEl.innerHTML = `<span class="rune">${runeSymbol}</span>`;
    playerDiceContainer.appendChild(diceEl);
  });
}

// Bot kockáinak megjelenítése
function renderBotDice(hidden = false) {
  botDiceContainer.innerHTML = '';
  
  if (hidden) {
    // Rejtett kockák, csak a hátlapot mutatjuk
    for (let i = 0; i < 4; i++) {
      const diceEl = document.createElement('div');
      diceEl.className = 'dice hidden';
      botDiceContainer.appendChild(diceEl);
    }
  } else {
    // Tényleges kockák megjelenítése
    botDice.forEach(runeSymbol => {
      const diceEl = document.createElement('div');
      diceEl.className = 'dice';
      diceEl.innerHTML = `<span class="rune">${runeSymbol}</span>`;
      botDiceContainer.appendChild(diceEl);
    });
  }
}

// Kockák felfedése
function revealDice(container, dice) {
  container.innerHTML = '';
  
  dice.forEach(runeSymbol => {
    const diceEl = document.createElement('div');
    diceEl.className = 'dice';
    diceEl.innerHTML = `<span class="rune">${runeSymbol}</span>`;
    container.appendChild(diceEl);
  });
}

// Egy adott rúna számának megszámolása a kockákon
function countRune(dice, rune) {
  return dice.filter(die => die === rune).length;
}

// LOKI kombináció ellenőrzése (minden rúnából pontosan 1-1)
function checkForLoki(dice) {
  // Minden rúnából kell lennie 1-nek
  return runes.every(rune => dice.includes(rune.symbol));
}

// Kockák átrendezése LOKI sorrendbe (csak vizuálisan)
function rearrangeToLoki(dice) {
  const lokiOrder = [];
  
  // LOKI sorrend: Laguz, Othala, Kenaz, Ingwaz
  runes.forEach(rune => {
    if (dice.includes(rune.symbol)) {
      lokiOrder.push(rune.symbol);
    }
  });
  
  // Kiegészítés, ha nem volt mind a 4 különböző rúna
  while (lokiOrder.length < 4) {
    lokiOrder.push(dice[lokiOrder.length % dice.length]);
  }
  
  return lokiOrder;
}

// Bot állításának generálása
function generateBotClaim(dice) {
  const actualCounts = {};
  runes.forEach(rune => {
    actualCounts[rune.symbol] = countRune(dice, rune.symbol);
  });
  
  // Bot stratégia: 70% eséllyel igazat mond, 30% eséllyel blöfföl
  const willBluff = Math.random() < 0.3;
  
  if (willBluff) {
    // Blöffölés: véletlenszerű rúna és a valósnál magasabb szám
    const bluffOptions = [];
    
    runes.forEach(rune => {
      const actualCount = actualCounts[rune.symbol];
      // Csak akkor hazudhatunk többet, ha nem 4 van belőle
      if (actualCount < 4) {
        bluffOptions.push({
          rune: rune.symbol,
          actualCount,
          bluffCount: Math.min(4, actualCount + 1 + Math.floor(Math.random() * 2))
        });
      }
    });
    
    // Ha van blöffölési lehetőség, válasszunk egyet
    if (bluffOptions.length > 0) {
      const bluff = bluffOptions[Math.floor(Math.random() * bluffOptions.length)];
      return { rune: bluff.rune, count: bluff.bluffCount };
    }
  }
  
  // Igazmondás vagy nincs blöffölési lehetőség
  // Válasszuk a legnagyobb előfordulást
  let bestRune = runes[0].symbol;
  let bestCount = 0;
  
  runes.forEach(rune => {
    const count = actualCounts[rune.symbol];
    if (count > bestCount) {
      bestCount = count;
      bestRune = rune.symbol;
    }
  });
  
  return { rune: bestRune, count: bestCount };
}

// Bot döntése, hogy elhiszi-e a játékos állítását
function botDecideToTrust(claim, actualCount) {
  // Bot stratégia a játékos állításának ellenőrzésére:
  
  // 1. Ha a játékos túl merészet állít (4-et mond bármelyik rúnából), azt általában nem hisszük el
  if (claim.count === 4 && Math.random() < 0.7) {
    return false;
  }
  
  // 2. Ha a játékos olyat állít, ami nagyon valószínűtlen (3 azonos rúna), azt is kritikusabban nézzük
  if (claim.count === 3 && Math.random() < 0.5) {
    return false;
  }
  
  // 3. Ha a játékos 2-t vagy 1-et állít, azt általában elhisszük
  if (claim.count <= 2) {
    return Math.random() < 0.8;
  }
  
  // 4. Véletlenszerű döntés, ha semmi speciális szabály nem érvényesül
  return Math.random() < 0.5;
}

// Játék indítása
startGame();
</script>

</body>
</html>
